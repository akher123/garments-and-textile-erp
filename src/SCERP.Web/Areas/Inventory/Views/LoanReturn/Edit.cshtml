@model SCERP.Web.Areas.Inventory.Models.ViewModels.LoanReturnViewModel
@{
    Layout = "~/Views/Shared/_Layout.Dialog.cshtml";
    ViewBag.Title = (Model.MaterialIssueId > 0 ? "Edit" : "Add");
}
<style type="text/css">
    ul.ui-autocomplete {
        z-index: 1100;
    }
</style>


@using (Html.BeginForm("Save", "LoanReturn", FormMethod.Post, new { @class = "LoanReturnSearchForm" }))
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(x => x.MaterialIssueId)

    @Html.HiddenFor(x => x.IsSearch)
    <fieldset>
        <legend>Loan Return</legend>

        <table class="tabefont">
            <tr>
           
                <td>
                    @Html.Label("Supplier")
                </td>

                <td>
                    @Html.DropDownListFor(x => x.SupplierId, Model.SupplierSelectListItem, "--Select--", new { @class = "form_dropdown" })
                </td>
                <td>
                    @Html.Label("*", new { @class = "labelInstruction" })
                </td>
                <td>
                    @Html.DisplayName("IRef:")
                </td>
                <td>
                    @Html.TextBoxFor(x => x.IssueReceiveNo, new { @style = "background-color: #b0c4de;", @readonly = "readonly" })
                </td>
            </tr>
            <tr>
                <td>
                    @Html.Label("INV NO:")
                </td>
                <td>
                    @Html.TextBoxFor(x => x.IssueReceiveNoteNo,new{@placeholder="Chalan NO"})
                </td>
                <td>
                    @Html.Label("*", new { @class = "labelInstruction" })
                </td>
                <td>
                    @Html.DisplayName("Date:")
                </td>
                <td>
                    @Html.TextBoxFor(x => x.IssueReceiveDate,new{@class="datepicker"})
                </td>
            </tr>
        </table>
        <hr />
        <table class="tabefont">
            <tr>
                <td>

                    @Html.DisplayName("Item:")
                </td>
                <td>
                    @Html.TextBoxFor(x => x.IssueDetail.ItemName, new { @onkeyup = "itemAutocomplite(this)", @class = "itemName", @data_val = "false" })
                    @Html.HiddenFor(x => x.IssueDetail.ItemId, new { @class = "itemHiddenField" })
                </td>
                <td>
                    @Html.DisplayName("Origin:")
                </td>
                <td>
                    @Html.DropDownListFor(x => x.IssueDetail.OriginId, Model.OriginSelectListItem, "-select-", new { @class = "originId", @data_val = "false", @onchange = "OriginWizeStockInHand(this)", @style = "width:215px" })
                    @Html.TextBoxFor(x => x.OriginSerarcKey, new { @class = "OriginSerarcKey", @data_val = "false", @style = "width:25px" })
                </td>
                <td>
                    @Html.DisplayName("RQty:")
                </td>
                <td>
                    @Html.TextBoxFor(x => x.IssueDetail.RequiredQuantity, "", new { @class = "requiredQuantity", @data_val = "false" })
                </td>
            </tr>

            <tr>
                <td>
                    @Html.DisplayName("Size:")
                </td>
                <td>
                    @Html.DropDownListFor(x => x.IssueDetail.SizeId, Model.SizeSelectListItem, "-select-", new { @class = "sizeId", @data_val = "false", @onchange = "SizeWizeStockInHand(this)", @style = "width:215px" })
                </td>
                <td>

                    @Html.DisplayName("SInH:")
                </td>
                <td>
                    @Html.TextBoxFor(x => x.IssueDetail.StockInHand, new { @class = "stockInHand", @data_val = "false", @style = "background-color: #b0c4de;" })

                </td>

                <td>

                    @Html.DisplayName("IQty:")
                </td>
                <td>
                    @Html.TextBoxFor(x => x.IssueDetail.IssuedQuantity, new { @class = "issuedQuantity", @data_val = "false" })

                </td>
            </tr>
            <tr>
                <td>
                    @Html.DisplayName("Brand:")
                </td>
                <td>
                    @Html.DropDownListFor(x => x.IssueDetail.BrandId, Model.BrandSelectListItem, "-select-", new { @class = "brandId", @onchange = "BrandWizeStockInHand(this)", @data_val = "false", @style = "width:215px" })
                </td>
                <td>

                    @Html.DisplayName("IRate:")
                </td>
                <td>
                    @Html.TextBoxFor(x => x.IssueDetail.IssuedItemRate, new { @class = "issuedItemRate", @data_val = "false", @style = "background-color: #b0c4de;" })
                </td>
                <td>

                    @Html.DisplayName("Description:")
                </td>
                <td>
                    @Html.TextBoxFor(x => x.IssueDetail.Remarks, new { @class = "remarks enterVent", @data_val = "false" })
                </td>
            </tr>
        </table>
        <hr />

        <table id="LoanReturnDetail" class="tabefont gridtable" style="width: 820px;">
            <thead style="text-align: center">
                <tr>
                    <th>
                        @Html.Label("Item")
                    </th>
                    <th>
                        @Html.Label("Size")
                    </th>
                    <th>
                        @Html.Label("Brand")
                    </th>
                    <th>
                        @Html.Label("Origin")
                    </th>
                    <th>
                        @Html.Label("Machine")
                    </th>
                    <th>
                        @Html.Label("SInH")
                    </th>
                    <th>
                        @Html.Label("RQty")
                    </th>
                    <th>
                        @Html.Label("IQty")
                    </th>
                    <th>
                        @Html.Label("IRate")
                    </th>

                    <th>
                        @Html.Label("Remarks")
                    </th>

                    <th>
                        @Html.Label("Delete")
                    </th>
                </tr>
            </thead>
            <tbody>
                @foreach (var m in Model.MaterialIssueDetails)
                {
                    <tr id="newRow-@Model.MaterialIssueDetails[m.Key].ItemId">

                        <td>
                            @Html.HiddenFor(x => x.MaterialIssueDetails[m.Key].MaterialIssueDetailId, new { @class = "mIDetailId-" + @Model.MaterialIssueDetails[m.Key].ItemId })
                            @Html.HiddenFor(x => x.MaterialIssueDetails[m.Key].MaterialIssueId)
                            @Html.HiddenFor(x => x.MaterialIssueDetails[m.Key].ItemId)
                            @Html.DisplayFor(x => x.MaterialIssueDetails[m.Key].ItemName)
                        </td>
                        <td>
                            @Html.HiddenFor(x => x.MaterialIssueDetails[m.Key].SizeId)
                            @Html.DisplayFor(x => x.MaterialIssueDetails[m.Key].SizeName)
                        </td>
                        <td>
                            @Html.HiddenFor(x => x.MaterialIssueDetails[m.Key].BrandId)
                            @Html.DisplayFor(x => x.MaterialIssueDetails[m.Key].BrandName)
                        </td>
                        <td>
                            @Html.HiddenFor(x => x.MaterialIssueDetails[m.Key].OriginId)
                            @Html.DisplayFor(x => x.MaterialIssueDetails[m.Key].OriginName)
                        </td>
                        <td>
                            @Html.HiddenFor(x => x.MaterialIssueDetails[m.Key].MachineId)
                            @Html.DisplayFor(x => x.MaterialIssueDetails[m.Key].MachineName)
                        </td>
                        <td>
                            @Html.DisplayFor(x => x.MaterialIssueDetails[m.Key].StockInHand)
                            @Html.HiddenFor(x => x.MaterialIssueDetails[m.Key].StockInHand)
                        </td>
                        <td>
                            @Html.DisplayFor(x => x.MaterialIssueDetails[m.Key].RequiredQuantity)
                            @Html.HiddenFor(x => x.MaterialIssueDetails[m.Key].RequiredQuantity)
                        </td>
                        <td>
                            @Html.DisplayFor(x => x.MaterialIssueDetails[m.Key].IssuedQuantity)
                            @Html.HiddenFor(x => x.MaterialIssueDetails[m.Key].IssuedQuantity)
                        </td>
                        <td>
                            @Html.DisplayFor(x => x.MaterialIssueDetails[m.Key].IssuedItemRate)
                            @Html.HiddenFor(x => x.MaterialIssueDetails[m.Key].IssuedItemRate)
                        </td>
                        <td>
                            @Html.ValueFor(x => x.MaterialIssueDetails[m.Key].Remarks)
                            @Html.HiddenFor(x => x.MaterialIssueDetails[m.Key].Remarks)
                        </td>
                        <td>
                            <input type="button" value="-" onclick="deleteRow(this)" />
                        </td>
                    </tr>
                }

            </tbody>

        </table>
        <hr />
        <table class="tabefont">
            <tr>

                <td>@Html.Label("Remarks")</td>
                <td>
                    @Html.TextBoxFor(x => x.Remarks)
                </td>
                <td>
                    <input type="submit" value="Save" />
                </td>
            </tr>

        </table>
    </fieldset>
}

@section scripts
{
<script src="~/Scripts/SCERP/Inventory/LoanReturn.js"></script>
}