@using SCERP.Common
@model SCERP.Web.Areas.Planning.Models.ViewModels.ProgramViewModel
@{
    ViewBag.Title = "Program";
    Layout = "~/Views/Shared/_InventoryLayout.cshtml";
}

<div style="text-align: center">
    <h2> Yarn Dyeing Program List</h2>
</div>

<div style="margin-left: 10px;">
    <div style="margin-left: 250px;">
        @using (Html.BeginForm("Index", "YarnDyeingProgram", FormMethod.Get, new { @class = "YarnDyeingProgramForm ignore-validation" }))
        {
            @Html.HiddenFor(x => x.IsSearch)
            @Html.ValidationSummary(true)
            <table>
                <tr>
                    <td>
                        @Html.Label("Date :")
                    </td>
                    <td>
                        @Html.TextBoxFor(x => x.FromDate, new { @class = "datepicker", @data_val = "false", @placeholder = "From date" })
                    </td>
                    <td>
                        @Html.TextBoxFor(x => x.ToDate, new { @class = "datepicker", @data_val = "false", @placeholder = "To date" })
                    </td>
                    <td>
                        @Html.TextBoxFor(x => x.SearchString, new { @data_val = "false", @placeholder = "Search key" })
                    </td>
                    <td>
                        <input type="button" class="searchAction" />
                    </td>
                </tr>
            </table>
        }
    </div>

        <div style="margin-bottom: 3px;">
            <button class="AjaxPopup addButton" onclick="search('/Planning/YarnDyeingProgram/Edit')">Add New</button>
        </div>
        @{
            var grid = new WebGrid(canPage: true, rowsPerPage: AppConfig.PageSize, canSort: true, ajaxUpdateContainerId: "grid");
            grid.Bind(Model.VPrograms, rowCount: Model.TotalRecords, autoSortAndPage: false);
            grid.Pager(WebGridPagerModes.All);
            @grid.GetHtml(htmlAttributes: new { id = "grid" },
                            tableStyle: "webgrid-table webgrid",
                             headerStyle: "webgrid-header",
                             footerStyle: "webgrid-footer",
                             alternatingRowStyle: "webgrid-alternating-row",
                             selectedRowStyle: "webgrid-selected-row",
                             rowStyle: "webgrid-row-style",
                             firstText: "First",
                             lastText: "Last",
                             nextText: "Next",
                mode: WebGridPagerModes.All,
                previousText: "Previous",
                columns:
                grid.Columns(
                grid.Column("ProgramRefId", header: "ProgNo"),
                grid.Column("PrgDate", header: "PrgDate", format: @<text>@(item.PrgDate == null ? "" : item.PrgDate.ToString("dd-MM-yyyy"))</text>),
                grid.Column("ExpDate", header: "ExpDate",format: @<text>@(item.ExpDate == null ? "" : item.ExpDate.ToString("dd-MM-yyyy"))</text>),
                grid.Column("PartyName", header: "Party"),
                grid.Column("Attention", header: "Attention"),
                grid.Column("Buyer", header: "Buyer"),
                grid.Column("RefNo", header: "Order"),
                grid.Column("StyleName", header: "Style"),
                grid.Column("ReqYarnQty", header: "ReqYarn"),
                grid.Column("ReqFabQty", header: "ReqFab"),
                grid.Column("YarnDeliveryQty", header: "YDelQty"),
                grid.Column("RcvQty", header: "RcvQty"),
                grid.Column("Edit", canSort: false, format: @<text><input type="button" onclick="search('/Planning/YarnDyeingProgram/Edit?Program.ProgramId=@item.ProgramId')" value="Edit" /></text>),
                grid.Column("C&P", canSort: false, format: @<text><input type="button" onclick="search('/Planning/YarnDyeingProgram/CopyPast?Program.ProgramId=@item.ProgramId')" value="Copy" /></text>),
                grid.Column("Delete",canSort:false,format:@<text><button class="delete" action="/Planning/YarnDyeingProgram/Delete?ProgramId=@item.ProgramId"></button></text>),
                grid.Column(header: "DPP", canSort: false, format: @<text><a href="/Planning/YarnDyeingProgram/DayedYarnProgramReport?ProgramId=@item.ProgramId&report=1" target="_blank">PDF(VAL)</a></text>),
                grid.Column(header: "DPP", canSort: false, format: @<text><a href="/Planning/YarnDyeingProgram/DayedYarnProgramReport?ProgramId=@item.ProgramId&report=0" target="_blank">PDF</a></text>)
));
        }

</div>

