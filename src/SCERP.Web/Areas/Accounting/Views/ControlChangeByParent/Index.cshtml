@model SCERP.Web.Areas.Accounting.Models.ViewModels.GeneralLedgerViewModel

@{
    ViewBag.Title = "Control Change";
    Layout = "~/Views/Shared/_Layout2.cshtml";
}

@using (Html.BeginForm("Index", "ControlChangeByParent", FormMethod.Get, new { @class = "groupchange submit-allow ignore-validation" }))
{

    <div class="header-title">
        <h2> Group to Group Change </h2>
    </div>

    <section class="common-search-section">
        <div class="search formCover common-search-wrapper">
            <table class="tabefont">

                <tr>
                    <td> @Html.DisplayName("Company Name :") </td>
                    <td> @Html.DropDownList("sectorId", null, "-Select-", new { @disabled = "disabled" }) </td>
                    <td> @Html.DisplayName("Source Control (4th Layer):") </td>
                    <td> @Html.TextBoxFor(p => p.GLHeadName, new { @class = "AccountName" }) </td>
                </tr>

                <tr>
                    <td> @Html.DisplayName("Destination Group (3rd Layer) :") </td>
                    <td> @Html.TextBoxFor(p => p.GLHeadNameNew, new { @class = "NewAccountName" }) </td>
                    <td> <input id="btnPrint" class="addButton" type="button" value="Transfer" /> </td>
                </tr>

                <tr>
                    <td> </td>
                    <td> @Html.DropDownList("CostCentreId", null, new { @class = "CostCentre", style = "width:160px;visibility: hidden;" }) </td>
                    <td> </td>
                </tr>

            </table>
        </div>
    </section>
}

@section scripts
{
    <script type="text/javascript">

        var temp = $('#GLHeadName').val();
        if (temp == 0)
            $('#GLHeadName').val('');

        $('.AccountName').autocomplete(
            {
                source: '@Url.Action("ControlSearch", "Report")'
            });

        var temp = $('#GLHeadNameNew').val();
        if (temp == 0)
            $('#GLHeadNameNew').val('');

        $('.NewAccountName').autocomplete(
            {
                source: '@Url.Action("ControlSummarySearch", "Report")'
            });

        $('#btnPrint').unbind('click').bind('click', function(event) {
            event.preventDefault();
            var $Button = $(this);
            var form = $Button.parents('form:first');
            var option = {
                url: '/ControlChangeByParent/TransferGlAccount',
                type: "POST",
                data: form.serialize(),
            };
            jQuery.Ajax(option);
        });

    </script>
}