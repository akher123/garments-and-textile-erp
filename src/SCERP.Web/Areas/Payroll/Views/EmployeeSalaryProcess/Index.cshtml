@using SCERP.Common
@model SCERP.Web.Areas.Payroll.Models.ViewModels.EmployeeSalaryProcessViewModel

@{
    ViewBag.Title = "Employee Salary Processed Info";
    Layout = "~/Views/Shared/_Layout2.cshtml";
}

@using (Html.BeginForm("Index", "EmployeeSalaryProcess", FormMethod.Get, new { @class = "EmployeeSalaryProcessSearchForm ignore-validation" }))
{
    @Html.HiddenFor(x => x.IsSearch)
    <div style="width: 500px; padding-left: 340px;">
        <h3>Employee Salary Processed Info</h3>
    </div>
    <section class="search formCover" style="margin-bottom: 3px;">

            <table class="tabefont">
                <tr>
                    <td></td>
                    <td align="left" colspan="2">@Html.Label("Fields with asterisk(*) mark are mandatory", new { @class = "labelInstruction" })</td>
                </tr>
                <tr>
                    <td>
                        @Html.Label("Company :")
                    </td>
                    <td>
                        @Html.DropDownListFor(x => x.SearchFieldModel.SearchByCompanyId, Model.CompanySelectListItem, "--Select--", new { @data_val = true, @class = "SearchByCompanyId", @action = "/Payroll/EmployeeSalaryProcess/GetAllBranchesByCompanyId", @TargetClass = "SearchByBranchId" })
                        &nbsp;@Html.Label("*", new { @class = "labelInstruction" })
                    </td>
                    <td>
                        @Html.Label("Branch :")
                    </td>
                    <td>
                        @Html.DropDownListFor(x => x.SearchFieldModel.SearchByBranchId, Model.BranchSelectListItem, "--Select--", new { @data_val = true, @class = "SearchByBranchId", @action = "/Payroll/EmployeeSalaryProcess/GetAllBranchUnitByBranchId", @TargetClass = "SearchByBranchUnitId" })
                        &nbsp;@Html.Label("*", new { @class = "labelInstruction" })
                    </td>
                </tr>

                <tr>
                    <td>
                        @Html.Label("Unit :")
                    </td>
                    <td>
                        @Html.DropDownListFor(x => x.SearchFieldModel.SearchByBranchUnitId, Model.BranchUnitSelectListItem, "--Select--", new { @data_val = true, @class = "SearchByBranchUnitId", @action = "/Payroll/EmployeeSalaryProcess/GetAllBranchUnitDepartmentByBranchUnitId", @TargetClass = "Hrm_BranchUnitDepartmentForDepartmentSectionAndLine" })
                        &nbsp;@Html.Label("*", new { @class = "labelInstruction" })
                    </td>
                    <td>
                        @Html.Label("Department :")
                    </td>
                    <td>
                        @Html.DropDownListFor(x => x.SearchFieldModel.SearchByBranchUnitDepartmentId, Model.BranchUnitDepartmentSelectListItem, "--Select--", new { @data_val = false, @class = "Hrm_BranchUnitDepartmentForDepartmentSectionAndLine", @action = "/Payroll/EmployeeSalaryProcess/GetDepartmentSectionAndLineByBranchUnitDepartmentId", @TargetClass = "Hrm_DepartmentSection", @OtherTargetClass = "Hrm_DepartmentLine" })
                    </td>

                </tr>

                <tr>
                    <td>
                        @Html.Label("Section :")
                    </td>
                    <td>
                        @Html.DropDownListFor(x => x.SearchFieldModel.SearchByDepartmentSectionId, Model.DepartmentSectionSelectListItem, "-Select-", new { @data_val = false, @class = "Hrm_DepartmentSection" })
                    </td>
                    <td>
                        @Html.Label("Line :")
                    </td>
                    <td>
                        @Html.DropDownListFor(x => x.SearchFieldModel.SearchByDepartmentLineId, Model.DepartmentLineSelectListItem, "-Select-", new { @data_val = false, @class = "Hrm_DepartmentLine" })
                    </td>
                </tr>

                <tr>
                    <td>
                        @Html.Label("Employee Type: ")
                    </td>
                    <td>
                        @Html.DropDownListFor(x => x.SearchFieldModel.SearchByEmployeeTypeId, Model.EmployeeTypeSelectListItem, "--Select--", new { @data_val = false, @class = "Hrm_EmployeeTypeId", })
                    </td>
                    <td>
                        @Html.Label("Employee Card:")
                    </td>
                    <td>
                        @Html.EditorFor(x => x.SearchFieldModel.SearchByEmployeeCardId, new { @class = "SearchByEmployeeCardId" })
                    </td>
                </tr>
                
                <tr>
                    <td>
                        @Html.DisplayName("Year:")
                    </td>

                    <td>
                        @Html.DropDownListFor(x => x.SearchFieldModel.SelectedYear, Model.Years, "-Select-")
                        &nbsp;@Html.Label("*", new { @class = "labelInstruction" })
                    </td>
                    <td>
                        @Html.DisplayName("Month:")
                    </td>

                    <td>
                        @Html.DropDownListFor(x => x.SearchFieldModel.SelectedMonth, Model.Months, "-Select-")
                        &nbsp;@Html.Label("*", new { @class = "labelInstruction" })
                    </td>
                </tr>
                <tr>
                    <td>
                        @Html.Label("From :")
                    </td>
                    <td>               
                        @Html.TextBoxFor(x => x.SearchFieldModel.StartDate, new { @class = "datepicker", @data_val = "false", @placeholder = "To" })
                        &nbsp;@Html.Label("*", new { @class = "labelInstruction" })
                    </td>
                    <td>
                        @Html.Label("To :")
                    </td>
                    <td>                       
                        @Html.TextBoxFor(x => x.SearchFieldModel.EndDate, new { @class = "datepicker", @data_val = "false", @placeholder = "To" })
                        &nbsp;@Html.Label("*", new { @class = "labelInstruction" })
                    </td>

                    <td>
                        <input type="button" class="searchAction" />
                    </td>
                
                </tr>
            </table>
    </section>
}

<section class="search formCover">
    <div class="additem">
        <div style="margin-bottom: 3px;">
            <input type="button" class="addButton" onclick="search('@Url.Action("Process", "EmployeeSalaryProcess", new { IsSearch = true })','EmployeeSalaryProcessSearchForm')" value="Process" />           
        </div>
        <fieldset>
            <legend>Employes</legend>
            <div style="width: 1002px;">
                <div style="overflow: auto;">
                    @{
                        var grid = new WebGrid(canPage: true, rowsPerPage: AppConfig.PageSize, canSort: false, ajaxUpdateContainerId: "grid");
                        grid.Bind(Model.EmployeeProcessedSalaryRecords, rowCount: Model.TotalRecords, autoSortAndPage: false);
                        grid.Pager(WebGridPagerModes.All);
                        @grid.GetHtml(htmlAttributes: new { id = "grid" },
                        tableStyle: "webgrid-table webgrid",
                        headerStyle: "webgrid-header",
                        footerStyle: "webgrid-footer",
                        alternatingRowStyle: "webgrid-alternating-row",
                        selectedRowStyle: "webgrid-selected-row",
                        rowStyle: "webgrid-row-style",
                        firstText: "First",
                        lastText: "Last",
                        nextText: "Next",
                        mode: WebGridPagerModes.All,
                        previousText: "Previous",
                        columns: grid.Columns(
                            grid.Column("Year", header: "Year", format: @<text>@(item.Year ?? "")</text>),
                            grid.Column("Month", header: "Month", format: @<text>@(item.Month ?? "")</text>),
                            grid.Column("FromDate", header: "From Date", format: @<text>@(item.FromDate == null ? "" : item.FromDate.ToString("dd-MM-yyyy"))</text>),
                            grid.Column("ToDate", header: "To Date", format: @<text>@(item.ToDate == null ? "" : item.ToDate.ToString("dd-MM-yyyy"))</text>),
                            grid.Column("EmployeeCardId", header: "Card Id ", format: @<text>@(item.EmployeeCardId ?? "")</text>),
                            grid.Column("Name", header: "Name", format: @<text>@(item.Name ?? "- - -")</text>),
                            grid.Column("MobileNo", header: "MobileNo", format: @<text>@(item.MobileNo ?? "- - -")</text>),
                            grid.Column("Branch", header: "Branch", format: @<text>@(item.Branch ?? "")</text>),
                            grid.Column("Unit", header: "Unit", format: @<text>@(item.Unit ?? "")</text>),
                            grid.Column("Department", header: "Department", format: @<text>@(item.Department ?? "")</text>),
                            grid.Column("Section", header: "Section", format: @<text>@(item.Section ?? "- - -")</text>),
                            grid.Column("Line", header: "Line", format: @<text>@(item.Line ?? "- - -")</text>),
                            grid.Column("EmployeeType", header: "Employee Type", format: @<text>@(item.EmployeeType ?? "- - -")</text>),
                            grid.Column("Grade", header: "Grade", format: @<text>@(item.Grade ?? "- - -")</text>),
                            grid.Column("Designation", header: "Designation", format: @<text>@(item.Designation ?? "- - -")</text>),
                            grid.Column("JoiningDate", header: "JoiningDate", format: @<text>@(item.JoiningDate == null ? "" : item.JoiningDate.ToString("dd-MM-yyyy"))</text>),
                            grid.Column("QuitDate", header: "Quit Date", format: @<text>@(item.QuitDate == null ? "" : item.QuitDate.ToString("dd-MM-yyyy"))</text>),
                            grid.Column("TotalDays", header: "TotalDays", format: @<text>@(item.TotalDays ?? "")</text>),    
                            grid.Column("WorkingDays", header: "Working Days", format: @<text>@(item.WorkingDays ?? "")</text>),
                            grid.Column("PayDays", header: "Pay Days", format: @<text>@(item.PayDays ?? "")</text>),
                            grid.Column("WeekendDays", header: "Weekend Days", format: @<text>@(item.WeekendDays ?? "")</text>),
                            grid.Column("HolidayDays", header: "Holidays", format: @<text>@(item.HolidayDays ?? "")</text>),
                            grid.Column("PresentDays", header: "Present Days", format: @<text>@(item.PresentDays ?? "")</text>),
                            grid.Column("AbsentDays", header: "Absent Days", format: @<text>@(item.AbsentDays ?? "")</text>),
                            grid.Column("LateDays", header: "Late Days", format: @<text>@(item.LateDays ?? "")</text>),
                            grid.Column("LeaveDays", header: "Leave Days", format: @<text>@(item.LeaveDays ?? "")</text>),
                            grid.Column("LWPDays", header: "LWP Days", format: @<text>@(item.LWPDays ?? "")</text>),
                            grid.Column("CasualLeave", header: "Casual Leave", format: @<text>@(item.CasualLeave ?? "")</text>),
                            grid.Column("SickLeave", header: "Sick Leave", format: @<text>@(item.SickLeave ?? "")</text>),
                            grid.Column("MaternityLeave", header: "Maternity Leave", format: @<text>@(item.MaternityLeave ?? "")</text>),
                            grid.Column("EarnLeave", header: "Earn Leave", format: @<text>@(item.EarnLeave ?? "")</text>),
                            grid.Column("GrossSalary", header: "Gross Salary", format: @<text>@(item.GrossSalary ?? "")</text>),
                            grid.Column("BasicSalary", header: "Basic Salary", format: @<text>@(item.BasicSalary ?? "")</text>),
                            grid.Column("HouseRent", header: "House Rent", format: @<text>@(item.HouseRent ?? "")</text>),
                            grid.Column("MedicalAllowance", header: "Medical Allowance", format: @<text>@(item.MedicalAllowance ?? "")</text>),
                            grid.Column("Conveyance", header: "Conveyance", format: @<text>@(item.Conveyance ?? "")</text>),
                            grid.Column("FoodAllowance", header: "FoodAllowance", format: @<text>@(item.FoodAllowance ?? "")</text>),
                            grid.Column("EntertainmentAllowance", header: "Entertainment Allowance", format: @<text>@(item.EntertainmentAllowance ?? "")</text>),
                            grid.Column("LWPFee", header: "LWP Fee", format: @<text>@(item.LWPFee ?? "")</text>),
                            grid.Column("AbsentFee", header: "AbsentFee", format: @<text>@(item.AbsentFee ?? "")</text>),
                            grid.Column("Advance", header: "Advance", format: @<text>@(item.Advance ?? "")</text>),
                            grid.Column("Stamp", header: "Stamp", format: @<text>@(item.Stamp ?? "")</text>),
                            grid.Column("TotalDeduction", header: "TotalDeduction", format: @<text>@(item.TotalDeduction ?? "")</text>),
                            grid.Column("AttendanceBonus", header: "Attendance Bonus", format: @<text>@(item.AttendanceBonus ?? "")</text>),
                            grid.Column("ShiftingBonus", header: "Shifting Bonus", format: @<text>@(item.ShiftingBonus ?? "")</text>),
                            grid.Column("TotalBonus", header: "TotalBonus", format: @<text>@(item.TotalBonus ?? "")</text>),
                            grid.Column("TotalPaid", header: "TotalPaid", format: @<text>@(item.TotalPaid ?? "")</text>),
                            grid.Column("OTHours", header: "OT Hours", format: @<text>@(item.OTHours ?? "")</text>),
                            grid.Column("OTRate", header: "OT Rate", format: @<text>@(item.OTRate ?? "")</text>),
                            grid.Column("TotalOTAmount", header: "Total OT Amount", format: @<text>@(item.TotalOTAmount ?? "")</text>),
                            grid.Column("NetAmount", header: "Net Amount", format: @<text>@(item.NetAmount ?? "")</text>)
                            ));
                    }
                </div>
            </div>
        </fieldset>

    </div>
</section>

